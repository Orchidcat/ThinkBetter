

T43键盘，一共有104键（可以使用16x8的矩阵进行对应）



目标
- 使用原有 T43直接连接上电路板
- 可手动切断电源（电源开关键），原有T43电源灯显示🔋
- 用 `Access IBM` 键来切换设备；
- 用 实体的开关键，来配置 win or Mac
  [Keychron-B2-Pro-Ultra-Slim-Wireless-Keyboard\_75943890-33c6-44e9-951a-30f5b2420ef6.jpg](https://cdn.shopify.com/s/files/1/0059/0630/1017/files/Keychron-B2-Pro-Ultra-Slim-Wireless-Keyboard_75943890-33c6-44e9-951a-30f5b2420ef6.jpg?v=1747736270)
- 



元件
[BSS138](https://www.digikey.com/en/products/detail/anbon-semiconductor-int-l-limited/BSS138/16708474?s=N4IgTCBcDaICwFYDMAGAtAIQMpYIxIA4BhAFTQDkAREAXQF8g)  
mmbf170




zmk相关
硬件适配、固件配置、键位映射



FPC 线缆，分三种规格（引脚间距： 1 毫米、0.8 毫米或 0.5 毫米）  需要测量

- [x] pro micro nrf52840 ✅ 2025-11-04
- [x] mcp23017 ✅ 2025-11-04
- [ ] 测量FPC线缆
- [ ] ZMK 软件层面限制多键输入（比如 3KRO，防 ghosting）
- [ ] 使用 I²C 400kHz，提高响应。
- [ ] 启用 MCP 的中断线做唤醒/触发扫描，避免持续轮询以省电。
- [x] Arduino 调试 [Debugging Fundamentals \| Arduino Documentation](https://docs.arduino.cc/learn/microcontrollers/debugging/) ✅ 2025-11-05
- [x] 万用表基础 [Multimeter Basics \| Arduino Documentation](https://docs.arduino.cc/learn/electronics/multimeter-basics/) ✅ 2025-11-05  COM 安装负极
- [x] [[提供同步脉冲以测量扫描频率]] ✅ 2025-11-05
- [ ] teensy 4.0 sheet [pjrc.com/teensy/card10a\_rev2\_web.pdf](https://www.pjrc.com/teensy/card10a_rev2_web.pdf)
- [x] smt贴片底座，不知道适配如何，已购买  [KX14-40K5DE \| Connectors - JAE Japan Aviation Electronics Industry, Ltd.](https://www.jae.com/en/connectors/series/detail/product/id=66560) ✅ 2025-11-06
- [ ] 通讯电平转换[Site Unreachable](https://zhuanlan.zhihu.com/p/605368220)
- [ ] 关于 显示灯的处理
- [ ] 


52840引脚图  [Pinout and Schematic - nice!nano](https://nicekeyboards.com/docs/nice-nano/pinout-schematic)
![[Pasted image 20251104135725.png]]



52840 原理图
![[Pasted image 20251104135747.png]]


==显示灯的处理==

[Title Unavailable \| Site Unreachable](https://www.manualslib.com/manual/767215/Ibm-Thinkpad-T43.html?page=56#manual)

![[Pasted image 20251113090153.png]]
![[Pasted image 20251113091059.png]]
![[Pasted image 20251113091147.png]]
背光亮度将通过脉冲宽度调制 (PWM) 信号来控制，该信号驱动 N 沟道 FET 的栅极。背光白光 LED 可以像上图所示那样并联或串联连接。N 沟道 FET 将处理背光白光 LED 所需的电流。

Caps、Num 和 Scroll Lock 指示灯
键盘矩阵显示这三个 LED 共用一个阳极，但阴极各自独立，分别连接到 FPC 连接器上的引脚。对于您的键盘，首先确定键盘矩阵的引脚，然后用万用表探测未使用的引脚来找到对应的 LED。

万用表应该会显示一个较小的电压读数，并且在极性正确的情况下，电流应该足以点亮 LED。需要一个**限流电阻**。您可能需要进行一些实验才能确定合适的电流值。我曾在几个使用 2mA LED 的键盘上使用过 715 欧姆的限流电阻，

![[Pasted image 20251113081722.png]]

![[Pasted image 20251113081743.png]]


![[Pasted image 20251113081810.png]]


Lenovo B545 LED 指示灯板条 LS-8503P
![[Pasted image 20251113085012.png]]




==TrackPoint==

PS/2 信号转换为 USB 信号。




## zmk 
### 检测通电状态
- **电池电量报告**：如果键盘有电池传感器（常见于无线键盘，如 nice!nano 或 XIAO BLE），ZMK 会自动检测电池电压（通过 ADC 引脚）。当电量 > 0% 时，表示“通电”（电池供电）；如果连接 USB，则优先 USB 供电。
- **USB 检测**：ZMK 支持 USB HID 模式，当检测到 USB 连接时，会切换到 USB 供电，并报告状态。
- **低功耗模式**：在“软关机”（soft-off）状态下，ZMK 可以配置唤醒源（wake-up sources），如按键或 USB 插入来“识别”重新通电。


### 估算电池使用时间
[ZMK Power Profiler \| ZMK Firmware](https://zmk.dev/power-profiler)