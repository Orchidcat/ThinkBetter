---
Tags: #DailyNotes 
---

#OpenSCAD 
voronoi 的应用

### fastvoronoi

`random_voronoi(cellsize, [xmin], [xmax], [ymin], [ymax], [thickness], [rcorner], [$fn]);`

包含的操作有两步：
`points = voronoi_array(cellsize, [xmin], [xmax], [ymin], [ymax], [allowable], [seed]);` 
	生成一个随机的点数组

`fastvoronoi(points,cellsize,[thickness],[rcorner])`
	在上面生成的点上，生成图案

cellsize：voronoi 图案的平均大小
`xmin,ymin`,`xmax,ymax`: 图案大小在这两个点限制的图形边界中
thickness： 边界之间的厚度
rcorner：边界之间的半径


运行原理：
我们在网格上生成一个随机排列的原子核阵列，使得每个网格方格恰好包含一个原子核。原子核可以位于网格方格中的任何位置（并且可以通过`allowable`参数进一步限制）。这种排列_看起来_仍然是随机的，但_保证了_每个沃罗诺伊网格由相距不超过两个网格方格的原子核构成。因此，为了在给定原子核周围生成任何沃罗诺伊网格，我们可以忽略任何距离超过此距离的其他原子核。

由于每个网格方格（边缘和角落的方格除外）周围都有 8 个其他方格，因此给定方格中的细胞核与任何其他细胞核的对角线距离永远不会超过两个方格。由于两个细胞核之间可以相隔两个细胞，因此我们只需要不超过 24 个交点即可计算给定细胞核的沃罗诺伊网格形状（细胞核周围的两个同心圆环，内环为 8 个细胞，外环为 16 个细胞）。


在一个grid里，生成一个随机排列的原子核，原子核可以位于方格的任何位置（可以使用allowable来限制位置）；给图形限制了可以渲染的区域；每个grid旁边都有8个对应的grid。给定grid中的细胞核与任何其他细胞核的对角线距离永远不会超过2个grid。因此，我们只需要不超过24个交点即可计算给定细胞核的沃罗诺伊网格形状（细胞核周围的两个同心圆环，内环为 8 个细胞，外环为 16 个细胞）




#### 一个可以参考的思路
creates the voronoi chunks/chips from a set of voronoi cores, passed to the function. The resulting 3D Structure can be substracted or intersected with any of your designs. Place the voronoi-points along or inside your structure, call my function and substract the resulting voronoi structure from yours.


`3D_VoronoiizzerAKL( type="CYLINDER", dim=dim,  n=120, thickness=2, walls=20, round = 3, seed = 9,  showDots=false, renderit=true) import("cat.stl");`



参考：
从 felipesanches Github开始
[GitHub - felipesanches/OpenSCAD\_Voronoi\_Generator: This is an OpenSCAD script that generates Voronoi diagrams. You can round the corners and also determine whether to render or not the nuclei of the cells in the diagram.](https://github.com/felipesanches/OpenSCAD_Voronoi_Generator)

继承自felipesanches，速度快12倍，并且有BOSL2的支持函数 `fastvoronoi_func_bosl2.scad`
[Fast voronoi method for OpenSCAD by Anachronist \| Download free STL model \| Printables.com](https://www.printables.com/model/831732-fast-voronoi-method-for-openscad)


[How to 3D Print Voronoi-Style Shapes with Inkscape and OpenSCAD](https://sesc.eu/posts/print-voronoi-openscad/)

