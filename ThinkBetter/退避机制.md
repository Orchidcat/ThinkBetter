#SQLServer 

为了防止线程在尝试获取自旋锁时等待过多的 CPU 周期，一段时间后，在 SQL Server 自旋锁上等待的线程将在保持运行状态时假定“睡眠”状态，即使它没有设法获取资源。这样，它将允许另一个线程在同一个 CPU 上执行。这种“睡眠”状态称为**退避**（**backoff**）SQLOS 机制。默认情况下，SQLOS 在通过执行退避将线程切换到睡眠状态之前，将首先旋转一段恒定的时间。再次尝试获取自旋锁认为现金并发状态一直保持，这是CPU密集型操作。为避免这种情况，获取自旋锁的尝试以受限方式执行，因此不会在每个线程自旋上执行

从 SQL Server 2008R2 开始，对于某些自旋锁类型，实现了改进的退避机制，允许线程两次尝试获取自旋锁之间的间隔以指数方式增加，从而在大多数情况下减少对CPU 性能。在这种情况下，SQLOS 会智能地假定在线程从睡眠状态恢复后无法获取自旋锁的情况下，下一个睡眠状态应该呈指数增长，因为现在线程在睡眠状态下设法获取自旋锁的机会较小状态时间保持不变

sqlos.spinlock_backoff扩展事件也可用于分析，因为每次退避发生时都会引发此事件 